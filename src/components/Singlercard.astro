---
import type { any } from "astro:schema";

// Function to fetch data and create static paths
export async function getStaticPaths() {
  const response = await fetch("https://gmrqdsphowntllgdewkq.supabase.co/rest/v1/yepha_singles", {
    headers: {
      apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdtcnFkc3Bob3dudGxsZ2Rld2txIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM3Mzc0NTksImV4cCI6MjA0OTMxMzQ1OX0.HHGha3yx6RNf9AkkQsBICs0b4qpwkOQ2cSO0BOAGxQ8",
    },
  });

  const singles = await response.json();

  return singles.map((single) => ({
    params: { id: single.id }, // Assuming each single has a unique 'id'
    props: { single }, // Pass the single data as props
  }));
}

const { single } = Astro.props;
console.log(single); // Log the single data for debugging
---

<body>
  <div class="flex-col">
    <a href={single.link_url}>
      <div class="img">
        <img src={single.image_url} alt="album cover" />
        <h2>{single.overskrift}</h2>
        <p class="aarstal">{single.underoverskrift}</p>
      </div>
    </a>
  </div>
</body>

<style>
  img {
    max-width: 250px;
  }
  .albumcovers {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 20px;
    padding: 30px;
    color: black;
    text-decoration: none;
    font-size: 10px;
    font-family: "Inter", serif;
    font-style: normal;
    text-align: center;
  }
</style>
